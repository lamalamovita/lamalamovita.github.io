<!DOCTYPE html>
<html>
<head>
  <title>游깴 WORLDWIDE CHAT</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 50px auto; padding: 20px; }
    #chatMessages { height: 400px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; background: #f9f9f9; }
    #msgInput { width: 60%; padding: 10px; }
    button { width: 20%; padding: 10px; background: #007bff; color: white; border: none; cursor: pointer; }
    #adminMode { background: #28a745; color: white; padding: 10px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h1>游깴 WORLDWIDE ANONYMN칈 CHAT</h1>
  
  <!-- ADMIN MODE tla캜칤tko -->
  <div id="adminMode" style="display:none;">
    <strong>游릭 ADMIN MODE</strong> | <button onclick="toggleAdmin()">Vypnout</button>
  </div>
  
  <!-- ADMIN p콏ep칤na캜 (tajn칠: klikni 3x na titulek) -->
  <h1 onclick="checkAdminMode()" style="cursor:pointer;">游깴 WORLDWIDE ANONYMN칈 CHAT</h1>
  
  <div id="chatMessages"></div>
  <input type="text" id="msgInput" placeholder="Napi코 zpr치vu..." onkeypress="if(event.key=='Enter') sendMessage()">
  <button onclick="sendMessage()">Odeslat</button>

  <script>
    const FORMSPREE_URL = 'https://formspree.io/f/xaqelrva';
    let isAdmin = false;
    let adminClicks = 0;
    
    // TAJN칗 ADMIN MODE (3x klik na titulek)
    function checkAdminMode() {
      adminClicks++;
      if(adminClicks >= 3) {
        isAdmin = true;
        document.getElementById('adminMode').style.display = 'block';
        loadMessages(); // Na캜ti star칠 zpr치vy
      }
    }
    
    function toggleAdmin() {
      isAdmin = !isAdmin;
      document.getElementById('adminMode').style.display = isAdmin ? 'block' : 'none';
    }
    
    function sendMessage() {
      let msg = document.getElementById("msgInput").value.trim();
      if(msg) {
        let sender = isAdmin ? "游릭 ADMIN" : "游깴 Anonym";
        
        // Zobraz v chatu
        document.getElementById("chatMessages").innerHTML += 
          `<p><strong>${sender} (${new Date().toLocaleTimeString()}):</strong> ${msg}</p>`;
        
        // Ode코li na Formspree (pouze anonymn칤 zpr치vy)
        if(!isAdmin) {
          fetch(FORMSPREE_URL, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
              email: 'chat@proton.me',
              message: `${sender}: ${msg}`,
              _subject: 'Nov치 zpr치va z WORLDWIDE CHAT'
            })
          });
        }
        
        document.getElementById("msgInput").value = "";
        document.getElementById("chatMessages").scrollTop = document.getElementById("chatMessages").scrollHeight;
      }
    }
    
    // Na캜ti star칠 zpr치vy (localStorage)
    function loadMessages() {
      let messages = localStorage.getItem('chatMessages') || '[]';
      messages = JSON.parse(messages);
      messages.forEach(msg => {
        document.getElementById("chatMessages").innerHTML += 
          `<p><strong>${msg.sender} (${msg.time}):</strong> ${msg.text}</p>`;
      });
    }
    
    // Ulo zpr치vu
    function saveMessage(sender, text) {
      let messages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
      messages.push({sender, time: new Date().toLocaleTimeString(), text});
      localStorage.setItem('chatMessages', JSON.stringify(messages));
    }
    
    // Inicializace
    loadMessages();
  </script>
</body>
</html>
