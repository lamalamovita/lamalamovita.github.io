<!DOCTYPE html>
<html>
<head>
<style>
.chat-popup {display:none;position:fixed;bottom:20px;right:20px;border:3px solid #f1f1f1;z-index:9;border-radius:10px;}
.form-container {max-width:300px;padding:10px;background-color:white;}
.form-container input {width:100%;padding:15px;margin:5px 0 22px 0;border:none;background:#f1f1f1;}
.form-container input:focus {background-color:#ddd;outline:none;}
.form-container .btn {background-color:#0066cc;color:white;padding:16px 20px;border:none;cursor:pointer;width:100%;margin-bottom:10px;opacity:0.8;border-radius:5px;}
.form-container .cancel {background-color:#f44336;}
.form-container .btn:hover,.open-button:hover {opacity:1;}
.open-button {background-color:#0066cc;color:white;padding:16px 20px;border:none;cursor:pointer;opacity:0.8;border-radius:50%;position:fixed;bottom:23px;right:23px;width:60px;height:60px;}
#chatMessages {height:200px;overflow-y:scroll;border:1px solid #ccc;padding:10px;margin-bottom:10px;background:white;border-radius:5px;}
.clear-btn {background-color:#666;font-size:12px;padding:5px 10px;}
</style>
</head>
<body>
<h1>Ahojte, sem vytvo콏il jednoduch칳 web s chatem!</h1>

<button class="open-button" onclick="openForm()">游눫</button>

<div class="chat-popup" id="myForm">
  <div class="form-container">
    <div id="chatMessages"></div>
    <input type="text" id="msgInput" placeholder="Napi코 zpr치vu..." name="msg">
    <button type="submit" class="btn" onclick="sendMessage()">Odeslat</button>
    <button type="button" class="btn clear-btn" onclick="clearChat()">Vymazat chat</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Zav콏칤t</button>
  </div>
</div>

<script>
// Na캜칤st zpr치vy p콏i spu코t캩n칤 str치nky
window.onload = function() {
  loadChatHistory();
};

function openForm() {document.getElementById("myForm").style.display="block";}
function closeForm() {document.getElementById("myForm").style.display="none";}

function sendMessage() {
  let input = document.getElementById("msgInput");
  let messages = document.getElementById("chatMessages");
  let msg = input.value.trim();
  
  if(msg) {
    // Ulo쬴t zpr치vu do localStorage
    let chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
    chatHistory.push({user: 'Ty', message: msg, time: new Date().toLocaleTimeString()});
    localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
    
    // Zobrazit zpr치vu
    messages.innerHTML += `<p><b>Ty (${new Date().toLocaleTimeString()}):</b> ${msg}</p>`;
    input.value = "";
    messages.scrollTop = messages.scrollHeight;
  }
}

function loadChatHistory() {
  let chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
  let messages = document.getElementById("chatMessages");
  
  messages.innerHTML = "";
  chatHistory.forEach(msgObj => {
    messages.innerHTML += `<p><b>${msgObj.user} (${msgObj.time}):</b> ${msgObj.message}</p>`;
  });
  messages.scrollTop = messages.scrollHeight;
}

function clearChat() {
  localStorage.removeItem('chatHistory');
  document.getElementById("chatMessages").innerHTML = "";
}

document.getElementById("msgInput").addEventListener("keypress", function(e) {
  if(e.key === 'Enter') sendMessage();
});
</script>
</body>
</html>
